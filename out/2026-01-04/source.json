{
  "source": "stackoverflow",
  "feed": "https://stackoverflow.com/feeds/tag?tagnames=performance&sort=newest",
  "domain": "stackoverflow.com",
  "title": "How do I implement ToString for my custom primitive type that does not need a Formatter without going against Rust's guidelines?",
  "url": "https://stackoverflow.com/questions/79859190/how-do-i-implement-tostring-for-my-custom-primitive-type-that-does-not-need-a-fo",
  "created": "2026-01-03 10:51:50+00:00",
  "text": "<p><a href=\"https://doc.rust-lang.org/std/string/trait.ToString.html\" rel=\"nofollow noreferrer\"><code>ToString</code></a> trait documentation states that &quot;<code>ToString</code> shouldn\u2019t be implemented directly: <a href=\"https://doc.rust-lang.org/std/fmt/trait.Display.html\" rel=\"nofollow noreferrer\" title=\"trait std::fmt::Display\"><code>Display</code></a> should be implemented instead&quot;. Even a such fundamental type as <a href=\"https://doc.rust-lang.org/std/primitive.bool.html\" rel=\"nofollow noreferrer\">bool</a> seems to follow this rule: eventhough both variants can be represented with a simple <code>&quot;true&quot;</code> or <code>&quot;false&quot;</code> string literal with no <code>Formatter</code> required, it still <a href=\"https://doc.rust-lang.org/src/core/fmt/mod.rs.html#2696-2700\" rel=\"nofollow noreferrer\">implements</a> <code>Display</code> like everything else:</p>\n<pre><code>impl Display for bool {\n    fn fmt(&amp;self, f: &amp;mut Formatter&lt;'_&gt;) -&gt; Result {\n        Display::fmt(if *self { &quot;true&quot; } else { &quot;false&quot; }, f)\n    }\n}\n</code></pre>\n<p>Since <code>ToString</code> is also <a href=\"https://doc.rust-lang.org/std/primitive.bool.html#impl-ToString-for-T\" rel=\"nofollow noreferrer\">implemented</a> for <code>bool</code> via blanket implementation, when I want to get a string representation of a boolean variable, I call <code>to_string()</code> on it. However, a few lines down there is an interesting <a href=\"https://doc.rust-lang.org/src/alloc/string.rs.html#2916\" rel=\"nofollow noreferrer\">implementation</a> of private <code>SpecToString</code> trait for <code>bool</code> which does not relate to its <code>Display</code> implementation:</p>\n<pre><code>impl SpecToString for bool {\n    #[inline]\n    fn spec_to_string(&amp;self) -&gt; String {\n        String::from(if *self { &quot;true&quot; } else { &quot;false&quot; })\n    }\n}\n</code></pre>\n<p>So the question is, how do I do something like that myself? I have a cust",
  "id": "31d773db3d5c9e4671608e12f7bd4b1f9754e615"
}